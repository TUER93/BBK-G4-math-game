# 国内部署指南 - BBK数学答题王

## 🇨🇳 国内推荐平台对比

| 平台 | 免费额度 | 难度 | 速度 | 推荐度 |
|------|---------|------|------|--------|
| **腾讯云 CloudBase** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| **阿里云 Serverless** | ⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ |
| **华为云 FunctionGraph** | ⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ |
| **Zeabur（中国优化）** | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| **4everland** | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ |

---

## 🏆 方案一：Zeabur（最推荐，最简单）

### 为什么选择 Zeabur？
✅ **专为中国优化**，访问速度快  
✅ **免费额度充足**（每月 $5）  
✅ **部署超简单**，支持 GitHub  
✅ **支持文件持久化**  
✅ **中文界面**  
✅ **自动 HTTPS**  

### 部署步骤：

#### 1️⃣ 上传代码到 GitHub
1. 访问 https://github.com/new
2. 创建仓库：`bbk-math-game`（可私有）
3. 点击 "Upload files"
4. 上传所有文件（不包括 `node_modules`）
5. 点击 "Commit changes"

#### 2️⃣ 在 Zeabur 部署
1. 访问 https://zeabur.com
2. 使用 GitHub 账号登录
3. 点击 **"Create Project"**（创建项目）
4. 点击 **"Deploy New Service"** → **"Git"**
5. 选择你的 `bbk-math-game` 仓库
6. Zeabur 自动检测 Node.js 项目
7. 等待 1-2 分钟自动部署

#### 3️⃣ 添加持久化存储
1. 点击你的服务
2. 点击 **"Volumes"**（卷）
3. 添加持久化卷：
   - Mount Path: `/app/data`
   - Size: 1GB（免费）
4. 重新部署

#### 4️⃣ 生成域名
1. 点击 **"Networking"**（网络）
2. 点击 **"Generate Domain"**（生成域名）
3. 获得域名如：`bbk-game.zeabur.app`
4. 或绑定自己的域名

**部署完成！** 🎉

---

## 🌟 方案二：腾讯云 CloudBase（学生优惠）

### 为什么选择 CloudBase？
✅ **国内访问极快**  
✅ **学生认证有优惠**  
✅ **免费额度大**  
✅ **腾讯出品，稳定可靠**  
✅ **支持数据库、存储**  

### 部署步骤：

#### 1️⃣ 注册腾讯云
1. 访问 https://cloud.tencent.com
2. 注册账号（可用微信登录）
3. 如果是学生，进行学生认证（更多优惠）

#### 2️⃣ 开通云开发
1. 进入控制台：https://console.cloud.tencent.com/tcb
2. 点击 **"新建环境"**
3. 选择 **"按量计费"**（有免费额度）
4. 环境名称：`bbk-game`
5. 等待环境创建完成（约1分钟）

#### 3️⃣ 部署代码

**方法A：使用 CloudBase CLI**
```bash
# 安装 CloudBase CLI
npm install -g @cloudbase/cli

# 登录
tcb login

# 初始化
tcb init

# 部署
tcb functions:deploy bbk-game
```

**方法B：网页上传**
1. 在云开发控制台选择 **"云函数"**
2. 点击 **"新建云函数"**
3. 上传代码压缩包
4. 配置入口文件：`server.js`

#### 4️⃣ 配置 HTTP 访问
1. 在云函数列表找到你的函数
2. 点击 **"触发器"**
3. 添加 **"HTTP 触发器"**
4. 获得访问域名

---

## 🚀 方案三：4everland（Web3 平台，国内可用）

### 为什么选择 4everland？
✅ **免费使用**  
✅ **部署简单**  
✅ **国内访问快**  
✅ **GitHub 集成**  

### 部署步骤：

#### 1️⃣ 访问平台
1. 访问 https://4everland.org
2. 使用 GitHub 登录

#### 2️⃣ 导入项目
1. 点击 **"New Project"**
2. 选择你的 GitHub 仓库
3. Framework：选择 **"Other"**
4. Build Command：留空
5. Output Directory：留空

#### 3️⃣ 部署
1. 点击 **"Deploy"**
2. 等待部署完成
3. 获得 `.4everland.app` 域名

---

## 🔥 方案四：阿里云 Serverless

### 部署步骤：

#### 1️⃣ 注册阿里云
1. 访问 https://www.aliyun.com
2. 注册账号
3. 开通函数计算 FC

#### 2️⃣ 使用 Serverless Devs 部署
```bash
# 安装工具
npm install -g @serverless-devs/s

# 配置账号
s config add

# 初始化项目
s init

# 部署
s deploy
```

#### 3️⃣ 配置 HTTP 触发器
1. 在函数计算控制台
2. 配置触发器
3. 获得访问域名

---

## 📱 方案五：微信云托管（适合小程序）

如果你计划做成微信小程序：

1. 注册微信小程序
2. 开通云托管
3. 上传代码
4. 一键部署

---

## 🎯 快速决策指南

### 如果你是：

**🎓 学生 / 个人项目**  
→ 推荐：**Zeabur** 或 **4everland**  
理由：最简单，免费，速度快

**🏫 学校项目 / 长期使用**  
→ 推荐：**腾讯云 CloudBase**  
理由：稳定，免费额度大，国内访问快

**💼 商业项目**  
→ 推荐：**阿里云** 或 **腾讯云**  
理由：企业级稳定性，技术支持好

**⚡ 想最快上线**  
→ 推荐：**Zeabur**  
理由：5分钟部署完成

---

## 📋 Zeabur 详细部署教程（推荐）

### 完整步骤：

#### 第一步：准备 GitHub 仓库
1. 打开 https://github.com/new
2. Repository name: `bbk-math-game`
3. 设为 Private（私有）
4. 点击 "Create repository"
5. 点击 "uploading an existing file"
6. 拖拽上传以下文件：
   ```
   server.js
   app.js
   audio-manager.js
   index.html
   styles.css
   admin.html
   admin.js
   admin-style.css
   package.json
   package-lock.json
   questions.json
   students.json
   data.json
   railway.json
   所有 .md 和 .txt 文件
   audio/ 文件夹
   ```
7. **不要上传** `node_modules` 文件夹
8. 点击 "Commit changes"

#### 第二步：部署到 Zeabur
1. 访问 https://zeabur.com/zh-CN
2. 点击右上角 "登录"
3. 选择 "使用 GitHub 登录"
4. 授权 Zeabur 访问
5. 点击 "创建项目"
6. 输入项目名：`bbk-game`
7. 点击 "创建"
8. 在项目页面点击 "部署新服务"
9. 选择 "Git"
10. 选择你的 `bbk-math-game` 仓库
11. Zeabur 自动检测为 Node.js 项目
12. 等待部署完成（约 1-2 分钟）

#### 第三步：配置域名
1. 点击你的服务
2. 点击 "网络" 标签
3. 点击 "生成域名"
4. 选择 `.zeabur.app` 域名
5. 输入子域名：`bbk-game`
6. 点击 "保存"
7. 获得网址：`https://bbk-game.zeabur.app`

#### 第四步：添加持久化存储（重要！）
1. 点击你的服务
2. 点击 "卷" 标签
3. 点击 "添加卷"
4. 挂载路径：`/app`
5. 大小：1GB
6. 点击 "添加"
7. 服务会自动重启

**完成！** 🎉

---

## ✅ 部署检查清单

部署后检查以下功能：

- [ ] 能访问首页
- [ ] 能正常登录
- [ ] 能加载题目
- [ ] 能提交答案
- [ ] 音效正常播放
- [ ] 管理后台可访问（`/admin.html`）
- [ ] 数据能保存
- [ ] 榜单显示正常

---

## 🆘 常见问题

### Q1: 部署后无法访问？
**A**: 检查端口配置，确保使用 `process.env.PORT`

### Q2: 数据没有保存？
**A**: 确保添加了持久化存储卷

### Q3: 音频文件无法播放？
**A**: 检查 `audio/` 文件夹是否上传完整

### Q4: GitHub 上传太慢？
**A**: 使用 https://gitee.com 作为替代，速度更快

### Q5: 免费额度不够用？
**A**: Zeabur 每月 $5 免费额度足够小型项目使用

---

## 💡 优化建议

### 1. 使用 Gitee 加速（可选）
如果 GitHub 太慢：
1. 在 Gitee 创建仓库
2. Zeabur 同样支持 Gitee
3. 国内访问更快

### 2. 绑定自定义域名
1. 准备一个域名
2. 在 Zeabur 添加自定义域名
3. 配置 DNS 解析
4. 获得专属网址

### 3. 配置环境变量
在 Zeabur 可以设置环境变量：
- `NODE_ENV=production`
- 其他配置

---

## 📞 需要帮助？

如果在部署过程中遇到问题，请告诉我：
1. 选择的平台
2. 遇到的错误信息
3. 部署到哪一步了

我会立即帮你解决！🚀
