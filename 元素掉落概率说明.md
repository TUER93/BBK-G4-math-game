# 元素掉落概率说明

## 📊 当前掉落概率

### 正常答题模式

| 元素 | 图标 | 掉落概率 | 说明 |
|------|------|----------|------|
| 💧 水 | 💧 | **20%** | 高概率（常见） |
| 🌪️ 风 | 🌪️ | **20%** | 高概率（常见） |
| 🪨 岩 | 🪨 | **20%** | 高概率（常见） |
| 🌿 草 | 🌿 | **20%** | 高概率（常见） |
| 🔥 火 | 🔥 | **10%** | 低概率（稀有） |
| ⚡ 雷 | ⚡ | **10%** | 低概率（稀有） |

**总计：**
- 💧 水 + 🌪️ 风 + 🪨 岩 + 🌿 草 = **80%**（常见元素）
- 🔥 火 + ⚡ 雷 = **20%**（稀有元素）

---

### 挑战模式

挑战模式掉落固定为：
- **50%** 概率掉落 ⚡ 雷
- **50%** 概率掉落 🔥 火

**只掉落稀有元素！**

---

## 🎮 游戏平衡性

### 设计理念：

1. **水、风、岩、草元素常见**
   - 掉落概率高（各20%）
   - 容易收集
   - 用于进入挑战模式的消耗

2. **火、雷元素稀有**
   - 掉落概率低（各10%）
   - 需要运气或通过挑战模式获得
   - 高价值元素

3. **挑战模式的价值**
   - 需要消耗常见元素进入
   - 100% 掉落稀有元素（火或雷）
   - 鼓励玩家挑战

---

## 📈 预期掉落分布（答100题）

理论上答100道题的掉落分布：

- 💧 水：约 **20个**
- 🌪️ 风：约 **20个**
- 🪨 岩：约 **20个**
- 🌿 草：约 **20个**
- 🔥 火：约 **10个**
- ⚡ 雷：约 **10个**

**实际会有随机波动**

---

## 🔧 修改历史

### 最新版本（当前）
- 水、风、岩、草：各20%（常见）
- 火、雷：各10%（稀有）

### 之前版本
- 火、雷：各20%
- 水、风、岩、草：各15%

---

## 💡 如需调整概率

修改文件：`server.js`

找到 `getRandomElement()` 函数：

```javascript
function getRandomElement() {
    const rand = Math.random();
    
    // 常见元素（高概率）
    if (rand < 0.20) return 'water';     // 水 20%
    if (rand < 0.40) return 'wind';      // 风 20%
    if (rand < 0.60) return 'rock';      // 岩 20%
    if (rand < 0.80) return 'grass';     // 草 20%
    
    // 稀有元素（低概率）
    if (rand < 0.90) return 'fire';      // 火 10%
    return 'thunder';                     // 雷 10%
}
```

**计算方法：**
- 每个元素的范围 = 前一个累计值 → 当前累计值
- 当前累计值 = 前一个累计值 + 当前概率

**示例：如果想让火雷各5%，其他各22.5%**
```javascript
if (rand < 0.225) return 'water';     // 水 22.5%
if (rand < 0.450) return 'wind';      // 风 22.5%
if (rand < 0.675) return 'rock';      // 岩 22.5%
if (rand < 0.900) return 'grass';     // 草 22.5%
if (rand < 0.950) return 'fire';      // 火 5%
return 'thunder';                      // 雷 5%
```

---

## 🎯 重新部署

修改概率后需要重新部署：

1. 保存文件
2. 重新打包项目
3. 上传到服务器
4. 重新部署

修改会立即生效，无需重置用户数据。
